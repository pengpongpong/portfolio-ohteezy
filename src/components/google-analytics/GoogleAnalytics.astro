---
const { analytics, advertisement } = Astro.props;
---

<>
    <script async src="https://www.googletagmanager.com/gtag/js?id=G-GMHSJSEHGX"
    ></script>

    <script is:raw>
        window.dataLayer = window.dataLayer || [];
        function gtag() {
            dataLayer.push(arguments);
        }

        gtag("js", new Date());
        gtag("config", "G-GMHSJSEHGX");
    </script>

    {/* advertisement consent */}

    {advertisement === "granted" 
    ? <script is:raw>
        window.dataLayer = window.dataLayer || [];
        function gtag() {
            dataLayer.push(arguments);
        }

        gtag("consent", "default", {
            "ad_storage": "granted",
        });
    </script>
    : <script is:raw>
        window.dataLayer = window.dataLayer || [];
        function gtag() {
            dataLayer.push(arguments);
        }

        gtag("consent", "default", {
            "ad_storage": "denied",
        });
    </script>}

  {/* analytics consent */}

    {analytics === "granted" 
    ? <script is:raw>
        window.dataLayer = window.dataLayer || [];
        function gtag() {
            dataLayer.push(arguments);
        }

        gtag("consent", "default", {
            "analytics_storage": "granted",
        });
    </script>
    : <script is:raw>
        window.dataLayer = window.dataLayer || [];
        function gtag() {
            dataLayer.push(arguments);
        }

        gtag("consent", "default", {
            "analytics_storage": "denied",
        });
    </script>}
</>
